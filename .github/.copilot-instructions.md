# Copilot Instructions - Planejar Web

## üìã Stack Tecnol√≥gico

### Framework Principal
- **Next.js 15.5.0** - App Router com TypeScript
- **React 19.1.0** - Biblioteca principal para UI
- **TypeScript 5** - Para tipagem est√°tica

### Sistema de Design e UI
- **Tailwind CSS 4** - Framework CSS utilit√°rio
- **Radix UI** - Componentes primitivos acess√≠veis:
  - `@radix-ui/react-alert-dialog` - Modais de confirma√ß√£o
  - `@radix-ui/react-dialog` - Modais gerais
  - `@radix-ui/react-label` - Labels acess√≠veis
  - `@radix-ui/react-popover` - Popovers e dropdowns
  - `@radix-ui/react-slot` - Composi√ß√£o de componentes
  - `@radix-ui/react-tooltip` - Tooltips
- **CVA (Class Variance Authority)** - Gerenciamento de variantes de componentes
- **clsx + tailwind-merge** - Utility para classes CSS condicionais
- **Lucide React** - Biblioteca de √≠cones moderna
- **React Icons** - Biblioteca adicional de √≠cones (FontAwesome, etc.)

### Formul√°rios e Valida√ß√£o
- **React Hook Form 7.62.0** - Gerenciamento de formul√°rios perform√°tico
- **Zod 4.1.1** - Schema validation TypeScript-first
- **@hookform/resolvers** - Integra√ß√£o RHF + Zod

### Banco de Dados e ORM
- **Prisma 6.14.0** - ORM TypeScript-first
- **@prisma/client** - Cliente gerado do Prisma
- **@prisma/extension-accelerate** - Performance e caching

### Autentica√ß√£o
- **NextAuth.js 5.0.0-beta.22** - Autentica√ß√£o completa
- **bcryptjs** - Hash de senhas

### UI Avan√ßada
- **Vaul** - Drawer/sidebar components
- **CMDK** - Command menu/search
- **Sonner** - Toast notifications elegantes
- **Recharts** - Gr√°ficos e charts para React

### Mapas e Geolocaliza√ß√£o
- **Leaflet 1.9.4** - Biblioteca de mapas
- **React Leaflet 5.0.0** - Wrapper React para Leaflet

### Outras Depend√™ncias
- **Next Themes** - Gerenciamento de temas
- **Vercel Analytics** - Analytics de performance

## üé® Padr√µes de Desenvolvimento

### Estrutura de Componentes UI
```typescript
// Use sempre CVA para variantes de componentes
const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        outline: "border border-input hover:bg-accent"
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8"
      }
    }
  }
)
```

### Formul√°rios
```typescript
// Use sempre React Hook Form + Zod
const formSchema = z.object({
  name: z.string().min(2, "Nome deve ter pelo menos 2 caracteres"),
  email: z.string().email("Email inv√°lido")
})

type FormData = z.infer<typeof formSchema>

const form = useForm<FormData>({
  resolver: zodResolver(formSchema)
})
```

### Prisma/Database
```typescript
// Use sempre o cliente Prisma tipado
import prisma from '@/lib/prisma'

// Opera√ß√µes sempre com try/catch
try {
  const users = await prisma.user.findMany({
    include: {
      accounts: true,
      sessions: true
    }
  })
} catch (error) {
  console.error('Database error:', error)
}
```

## üöÄ Conven√ß√µes do Projeto

### Estrutura de Pastas
```
src/
‚îú‚îÄ‚îÄ app/                 # App Router pages
‚îú‚îÄ‚îÄ components/          # Componentes reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ ui/             # Componentes base do design system
‚îÇ   ‚îî‚îÄ‚îÄ providers/      # Context providers
‚îú‚îÄ‚îÄ lib/                # Utilities e configura√ß√µes
‚îú‚îÄ‚îÄ actions/            # Server actions
‚îú‚îÄ‚îÄ validations/        # Schemas Zod
‚îî‚îÄ‚îÄ utils/              # Fun√ß√µes utilit√°rias
```

### Estilos e Classes
- **Use Tailwind CSS classes sempre**
- **Componentes devem ser responsivos por padr√£o**
- **Use `cn()` function para merge de classes:**
```typescript
import { cn } from '@/lib/utils'

className={cn("base-classes", conditionalClasses, props.className)}
```

### Autentica√ß√£o
- **Use NextAuth.js para todas as opera√ß√µes de auth**
- **Middleware configurado para prote√ß√£o de rotas**
- **Session management via React Context**

### Componentes UI
- **Baseados em Radix UI para acessibilidade**
- **Estilizados com Tailwind CSS**
- **Variantes gerenciadas com CVA**
- **TypeScript interfaces sempre exportadas**

### Performance
- **Use Server Components quando poss√≠vel**
- **Client Components apenas quando necess√°rio**
- **Lazy loading para componentes pesados**
- **Otimiza√ß√£o de imagens com next/image**

## üéØ Contexto da Aplica√ß√£o

Este √© um sistema de **Consultoria Agr√≠cola** com:
- Gest√£o de fazendas, talh√µes e plantios
- Controle de insumos e variedades
- Dashboard com m√©tricas e gr√°ficos
- Sistema de autentica√ß√£o completo
- Interface responsiva e moderna

### Dom√≠nio da Aplica√ß√£o
- **Clientes**: Propriet√°rios de fazendas
- **Fazendas**: Propriedades rurais com localiza√ß√£o e dados
- **Talh√µes**: Divis√µes das fazendas para plantio
- **Plantios**: Cultivos espec√≠ficos com variedades
- **Insumos**: Fertilizantes, defensivos, sementes
- **Variedades**: Tipos de sementes/culturas

## ‚ö° Comandos Importantes
```bash
npm run dev          # Desenvolvimento
npm run build        # Build de produ√ß√£o
npm run lint         # ESLint
npx prisma studio    # Interface do banco
npx prisma generate  # Gerar cliente Prisma
npx prisma migrate   # Executar migra√ß√µes
```

Sempre siga estes padr√µes ao sugerir ou implementar c√≥digo!